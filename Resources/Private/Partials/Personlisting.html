{namespace aw=Ferenckrausz\Attoworld\ViewHelpers}
<div class="view-listing">
    
    <div class="view-listing-row-1 clearfix">
        <div class="view-listing-row-1-col-1">
            <div class="picture">
                <f:if condition="{pperson.model.image}">
                    <f:then>
                        <f:render partial="Personimage" arguments="{pperson: pperson, width: '308', height: '308'}"/>

                        <!-- <f:image treatIdAsReference="1" src="{pperson.model.image}" alt="{pperson.model.title} {pperson.model.forename} {pperson.model.surname}" width="308c" height="308c"/> -->
                    </f:then>
                </f:if>
            </div>
        </div>
        <div class="view-listing-row-1-col-2">
            <div class="title clearfix">
                <div class="name">{pperson.model.forename} {pperson.model.surname}</div>
                <div class="nationality"><f:image src="" alt="nationality"/></div>
            </div>
            <div class="position">
                <f:for each="{pperson.model.position}" as="position" iteration="posIter"><f:if condition="{position.title}!='Automatic'"><f:then><f:if condition="{posIter.isFirst}"><f:else>, </f:else></f:if><f:format.html parseFuncTSPath=""><aw:Ucfirst string="{position.title}"/></f:format.html></f:then></f:if></f:for>
            </div>
        </div>
        <div class="view-listing-row-1-col-3">
            <f:for each="{pperson.address.locationsjson}" as="location" iteration="LocationIterator">
                <f:for each="{location.locations.0.phonenumbers}" as="phonenumber" iteration="PhoneIterator">
                    <div class="phone"><aw:Addresskind string="{phonenumber.kind}" type="phone" type2="{phonenumber.type}"/>{phonenumber.number}</div>
                </f:for>    
            </f:for>
        </div>
        <div class="view-listing-row-1-col-4">
            <f:for each="{pperson.address.locationsjson}" as="location" iteration="LocationIterator">
                <f:for each="{location.locations.0.emails}" as="email" iteration="EmailIterator">
                    <div class="email">Email: <f:link.email email='{email.number}'/></div>
                </f:for>
            </f:for>
        </div>
    </div>
</div>